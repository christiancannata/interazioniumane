jQuery(document).ready(function(t){"use strict";function e(e){window.top.postMessage({slug:"letsbox",action:"wpcp-shortcode",shortcode:e},window.location.origin);var n=t("form").data("callback");""!==n&&window.parent[n](e)}function n(){var n=t(".LetsBox.files").attr("data-token"),o=t(".LetsBox[data-token='"+n+"']").attr("data-path"),i=a(".LetsBox[data-token='"+n+"'] input[name='selected-files[]']"),s=t(".LetsBox.files").attr("data-account-id");return 0===i.length&&e(""),t.ajax({type:"POST",url:LetsBox_vars.ajax_url,data:{action:"letsbox-create-link",account_id:s,listtoken:n,lastpath:o,entries:i,_ajax_nonce:LetsBox_vars.createlink_nonce},beforeSend:function(){t(".LetsBox .loading").height(t(".LetsBox .ajax-filelist").height()),t(".LetsBox .loading").fadeTo(400,.8),t(".LetsBox .wpcp-dropdown-menu-button").attr("disabled","disabled")},complete:function(){t(".LetsBox .loading").fadeOut(400),t(".LetsBox .wpcp-dropdown-menu-button").removeAttr("disabled")},success:function(n){if(null!==n&&null!==n.links&&n.links.length>0){var a="";t.each(n.links,function(t,e){!1===e.link?a+='<a class="LetsBox-directlink" href="#">Plugin does not have permission to create shared link for: '+e.name+"</a><br/>":a+='<a class="LetsBox-directlink" href="'+e.link.replace("?dl=1","")+'" target="_blank">'+e.name+"</a><br/>"}),e(a)}},dataType:"json"}),!1}function a(e){var n=t(e+":checked").map(function(){return this.value}).get();return n}t(".wpcp-dropdown-menu-content a").on("click",function(e){e.stopPropagation(),n(t(this).data("type"))})});