(function(e){"use strict";function t(e,t,a){window.top.postMessage({slug:"wpcp",action:"wpcp-change-value",id:e,value:t,old_value:a},window.location.origin)}function a(e){if(e.origin!==window.parent.location.origin)return;if("object"!=typeof e.data||null===e.data||void 0===e.data.action)return;if("wpcp-select-entries"!==e.data.action)return;if("letsbox"!==e.data.slug)return;const t=e.data.entries[0];i.find(".wpcp-folder-selector-current").val(t.entry_name),i.find(".wpcp-folder-selector-input-account").val(t.account_id).trigger("change"),i.find(".wpcp-folder-selector-input-id").val(t.entry_id).trigger("change"),i.find(".wpcp-folder-selector-input-name ").val(t.entry_name).trigger("change"),window.modal_folder_selector.close(),window.removeEventListener("message",a)}function n(t){if(e("#letsbox-modal-folder-selector").length>0)return window.modal_folder_selector.open();var a=e('<a tabindex="0" class="close-button" title="" onclick="modal_folder_selector.close();"><i class="eva eva-close eva-lg" aria-hidden="true"></i></a></div>'),n=e('<div class="letsbox-modal-body" tabindex="0"></div>'),o=e('<div class="letsbox-modal-footer"><div class="letsbox-modal-buttons"></div></div>'),i=e('<div id="letsbox-modal-folder-selector" class="LetsBox letsbox-modal letsbox-modal80 light"><div class="modal-dialog"><div class="modal-content"></div></div></div>'),c=t.clone().show();c.find(".wpcp-module").LetsBox(LetsBox_vars),n.append(c),e("#wpcp").append(i),e("#letsbox-modal-folder-selector .modal-content").append(a,n,o);var d=new RModal(document.getElementById("letsbox-modal-folder-selector"),{bodyClass:"rmodal-open",dialogOpenClass:"animated slideInDown",dialogCloseClass:"animated slideOutUp",escapeClose:!0,afterClose(){window.removeEventListener("message",self.callback_handler)}});document.addEventListener("keydown",function(e){d.keydown(e)},!1),d.open(),window.modal_folder_selector=d}var o=null,i=null;/letsbox/i.test(window.location.href)&&e("body").addClass("wpcp-admin"),e("#wpcp").fadeIn(),e("#wpcp").on({click:function(t){var a=e(this),n=a.data("nav-tab");if(a.hasClass("disabled"))return!1;e("a[data-nav-tab]").removeClass("bg-gray-100 text-gray-900").addClass("text-gray-600 hover:bg-gray-50 hover:text-brand-color-900"),e("[data-nav-panel]").removeClass("wpcp-tab-active").addClass("hidden"),a.addClass("wpcp-tab-active").addClass("bg-gray-100 text-gray-900").removeClass("text-gray-600 hover:bg-gray-50 hover:text-brand-color-900"),e("[data-nav-panel='"+n+"']").addClass("wpcp-tab-active").removeClass("hidden"),location.hash.replace("#",""),location.hash=n,window.scrollTo(0,0),window.parent.scroll(0,0)}},'a[data-nav-tab]:not(".disabled")'),location.hash&&location.hash.indexOf("TB_inline")<0?e("[data-nav-tab='"+location.hash.replace("#","")+"']").trigger("click"):e("[data-nav-tab]:first").trigger("click"),e("#wpcp").on({click:function(){var t=e(this),a=e(this).parents("[data-nav-panel]"),n=e(this).next(),o=t.hasClass("wpcp-panel-header-active");o||(a.find(".wpcp-panel-header-opened").hide(),a.find(".wpcp-panel-header-closed").show(),a.find(".wpcp-panel-header-active").removeClass("wpcp-panel-header-active"),a.find(".wpcp-panel-accordion").slideUp(),t.find(".wpcp-panel-header-opened").show(),t.find(".wpcp-panel-header-closed").hide(),t.addClass("wpcp-panel-header-active"),n.slideDown(200),n.get(0).scrollIntoView({block:"start",inline:"start"}))}},".wpcp-panel-header"),e("[data-nav-panel]").each(function(){e(this).find(".wpcp-panel-header:first").trigger("click")}),e(".wpcp-input-checkbox-button, .wpcp-input-checkbox-icon-button").on("click",function(a){var n=e(this).find('input[type="checkbox"]');n.prop("checked",!n.prop("checked")).trigger("change"),t(n.attr("id"),n.prop("checked"),!n.prop("checked"))}),e('.wpcp-input-checkbox-button input[type="checkbox"]').on("change",function(t){var a=e(this).parent(".wpcp-input-checkbox-button"),n=a.children(".wpcp-input-checkbox-button-container"),o=n.children(".wpcp-input-checkbox-button-off"),i=n.children(".wpcp-input-checkbox-button-on"),c=e(this).prop("checked");c?(a.removeClass("bg-gray-200").addClass("bg-brand-color-900"),n.removeClass("translate-x-0").addClass("translate-x-5"),o.removeClass("opacity-100 ease-in duration-200").addClass("opacity-0 ease-out duration-100"),i.removeClass("opacity-0 ease-out duration-100").addClass("opacity-100 ease-in duration-200"),e(a.data("toggle-element")).slideDown()):(a.addClass("bg-gray-200").removeClass("bg-brand-color-900"),n.addClass("translate-x-0").removeClass("translate-x-5"),o.addClass("opacity-100 ease-in duration-200").removeClass("opacity-0 ease-out duration-100"),i.addClass("opacity-0 ease-out duration-100").removeClass("opacity-100 ease-in duration-200"),e(a.data("toggle-element")).slideUp())}).trigger("change"),e('.wpcp-input-checkbox-icon-button input[type="checkbox"]').on("change",function(t){var a=e(this).parent(".wpcp-input-checkbox-icon-button"),n=e(this).prop("checked");n?a.addClass("bg-gray-50 border-brand-color-900").removeClass("bg-white"):a.removeClass("bg-gray-50 border-brand-color-900").addClass("bg-white")}).trigger("change"),e(".wpcp-input-textbox, .wpcp-input-textarea, .wpcp-input-wpeditor, .wpcp-input-hidden").on({focus:function(t){var a=e(this);a.data("old-value",a.val())},change:function(a){var n=e(this);t(n.attr("id"),n.val(),n.data("old-value"))}}),e(".wpcp-input-select").on({focus:function(t){var a=e(this);a.data("old-value",a.val())},change:function(a){var n=e(this);t(n.attr("id"),n.val(),n.data("old-value")),n.trigger("do-toggle")},"do-toggle":function(t){var a=e(this),n=a.find("option").map(function(){return e(this).data("toggle-element")}).get(),o=a.find(":selected").data("toggle-element");n.length&&(e.each(n,function(t,a){e(a).slideUp(0)}),e(o).slideDown())}}).trigger("do-toggle"),e(".wpcp-input-radio").on({focus:function(t){var a=e(this);a.data("old-value",a.val())},change:function(a){var n=e(this);t(n.attr("id"),n.val(),n.data("old-value")),n.trigger("do-toggle")},"do-toggle":function(t){var a=e(this),n=e('input[name="'+a.attr("name")+'"]').map(function(){return e(this).data("toggle-element")}).get(),o=e('input[name="'+a.attr("name")+'"]:checked').data("toggle-element");n.length&&(e.each(n,function(t,a){e(a).slideUp(0)}),e(o).slideDown())}}).trigger("do-toggle"),e(".wpcp-shareon-toggle-button").on("click",function(a){a.stopImmediatePropagation();var n=e(this).next(),o=n.val();"disabled"===o?n.val("enabled"):n.val("disabled"),t(n.attr("id"),n.val(),o),n.trigger("change")}),e(".wpcp-shareon-input").on("change",function(t){"disabled"===e(this).val()?e(this).prev().removeClass("shareon-enabled").addClass("shareon-disabled"):e(this).prev().removeClass("shareon-disabled").addClass("shareon-enabled")}),e(".wpcp-tagify").each(function(){new Tagify(this,{enforceWhitelist:!0,editTags:!1,dropdown:{classname:"wpcp-app",enabled:0,highlightFirst:!0,closeOnSelect:!1,maxItems:20,position:"all"},whitelist:JSON.parse(WPCloudplugin_AdminUI_vars.whitelist),templates:{tag:function(e){return"<tag title='"+e.text+"' contenteditable='false' spellcheck='false' tabIndex='-1'  class="+this.settings.classNames.tag+(e.class?e.class:"")+"><x class='tagify__tag__removeBtn' role='button'></x><div><span class='tagify__tag-type'>"+e.type+"</span><span class='tagify__tag-text'>"+(void 0!==e.text?e.text:e.value)+"</span></div></tag>"},dropdownItem:function(e){return"<div class='tagify__dropdown__item' value='"+e.value+"' role='option'><img onerror='this.style.visibility=\"hidden\"' src='"+e.img+"'><span class='tagify__tag-type'>"+e.type+"</span><span>"+e.text+"</span></div>"},dropdownFooter(e){var t=e.length-this.settings.dropdown.maxItems;return t>0?"<footer class='tagify__dropdown__footer'>"+t+" more items. Refine your search</footer>":""}}})}),tippy(".wpcp_help_tooltip",{allowHTML:!0,interactive:!0}),e(".ddslickbox").each(function(){var t=e(this);t.ddslick({width:"598px",background:"#f4f4f4",onSelected:function(t){var a=e(t.selectedItem).closest(".dd-container").next();a.val()!==t.selectedData.value&&a.val(t.selectedData.value).trigger("change")}})}),e("#wpcp").on({click:function(t){i=e(this).parents(".wpcp-folder-selector"),n(i.find(".wpcp-folder-selector-embed")),window.addEventListener("message",a)}},".wpcp-folder-selector-button, .wpcp-folder-selector-current"),e("#wpcp").on({click:function(t){i=e(this).parents(".wpcp-folder-selector"),i.find(".wpcp-folder-selector-current").val(""),i.find(".wpcp-folder-selector-input-account").val("").trigger("change"),i.find(".wpcp-folder-selector-input-id").val("").trigger("change"),i.find(".wpcp-folder-selector-input-name ").val("").trigger("change")}},".wpcp-folder-clear-button"),window.showNotification=function(t){var a=e("#wpcp-notification");t?(a.find(".wpcp-notification-success").show(),a.find(".wpcp-notification-failed").hide()):(a.find(".wpcp-notification-success").hide(),a.find(".wpcp-notification-failed").show()),clearTimeout(o),a.fadeIn(),o=window.setTimeout(function(){a.fadeOut()},3e3)},window.hideNotifications=function(){var t=e("#wpcp-notification");t.fadeOut(),clearTimeout(o)},e("#wpcp").on({click:function(t){e(this).parents(".wpcp-dropdown-menu").find(".wpcp-dropdown-menu-content").fadeIn(),t.stopPropagation()}},".wpcp-dropdown-menu button"),e("body").on({click:function(t){e(".wpcp-dropdown-menu-content").hide()}}),e("#wpcp").on({click:function(t){e(e(this).data("dialog-id")).fadeIn()}},".wpcp-modal-open-dialog"),e("#wpcp").on({click:function(t){e(this).parents(".wpcp-dialog").fadeOut()}},".wpcp-dialog-close"),e("#wpcp").on({click:function(t){var a=e(this).parents(".wpcp-dialog");a.fadeOut(null,function(){a.remove()})}},".wpcp-dialog-destroy"),e("#wpcp").on({click:function(t){var a=e(this).parent().parent().find(".wpcp-module");return window.postMessage({slug:"letsbox",action:"wpcp-select-entries",entries:[{entry_id:a.attr("data-id"),entry_name:a.find(".wpcp-breadcrumb li:last").text(),account_id:a.attr("data-account-id")}]},window.location.origin),t.stopPropagation(),!0}},".wpcp-dialog-entry-select")})(jQuery);