(function(e){"use strict";function t(t){o=t,i=o.find("[data-user-id]").attr("data-user-id"),e("#wpcp-modal-selector").fadeIn()}function n(){e("#wpcp-modal-selector").fadeOut()}function a(t){if(t.origin!==window.parent.location.origin)return;if("object"!=typeof t.data||null===t.data||void 0===t.data.action)return;if("wpcp-select-entries"!==t.data.action)return;if("letsbox"!==t.data.slug)return;const a=t.data.entries[0];e.ajax({type:"POST",url:LetsBox_vars.ajax_url,data:{action:"letsbox-linkusertofolder",account_id:a.account_id,id:a.entry_id,text:a.entry_name,userid:i,_ajax_nonce:LetsBox_vars.createlink_nonce},beforeSend:function(){o.find(".select_folder").addClass("hidden"),n()},complete:function(){},success:function(e){void 0!==e.path?(o.parent().find(".column-private_folder").html("<strong>"+e.path+"</strong>"),o.find(".deselect_folder").removeClass("hidden")):location.reload()},dataType:"json"})}var o=null,i=null;e("#wpcp .select_folder").on("click",function(n){t(e(this).parent())}),window.addEventListener("message",a),e("#wpcp .deselect_folder").on("click",function(t){var n=e(this),a=e(this).attr("data-user-id");e.ajax({type:"POST",url:LetsBox_vars.ajax_url,data:{action:"letsbox-unlinkusertofolder",userid:a,_ajax_nonce:LetsBox_vars.createlink_nonce},beforeSend:function(){n.addClass("hidden")},success:function(e){"1"===e?(n.prev().removeClass("hidden"),n.parent().parent().find(".column-private_folder").text("")):location.reload()},complete:function(e){},dataType:"text"})})})(jQuery);